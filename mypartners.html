<!DOCTYPE html>
<html>

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>DAPP4U</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="../code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <link rel="stylesheet" href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
 
  <style>

    .node circle {
      fill: #fff;
      stroke: steelblue;
      stroke-width: 3px;
    }

    .node text {
      font: 12px sans-serif;
    }

    .link {
      fill: none;
      stroke: #ccc;
      stroke-width: 2px;
    }

   #tbl td:nth-of-type(2) {
        display: none;
   }

  </style>

</head>
<body class="hold-transition sidebar-mini layout-fixed">
    
    <div class="wrapper">

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-dark navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
                </li>
              
                <li class="nav-item d-none d-sm-inline-block active">
                    <a href="dashboard.html" class="nav-link">Direct Level Income</a>
                </li>

                <li class="nav-item d-none d-sm-inline-block">
                    <a href="https://api.dapp4u.live/" class="nav-link">Auto Pool Income</a>
                </li>
              <li class="nav-item d-none d-sm-inline-block">
                    <a href="mypartners.html" class="nav-link">Referral Link</a>
                </li>
               <li class="nav-item d-none d-sm-inline-block">
                    <a href="https://dapp4u.live/" class="nav-link">Log out</a>
                </li>

            </ul>
             <marquee class="blink" style="font-weight: bold; position: absolute; color: chartreuse; padding-top: 0; top: 40px;">
                <!---Beta version going on ...--->
            </marquee>
        </nav>
        <!-- /.navbar -->
        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="dashboard.html" class="brand-link">

                <span class="brand-text font-weight-light">
                    <img src="https://api.dapp4u.biz/assets/img/logo.png" alt="AdminLTE Logo" class="brand-image">
                </span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <br>
                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                        
                        <li class="nav-item">
                            <a href="dashboard.html" class="nav-link">
                                <i class="nav-icon fas fa-user-friends"></i>
                                <p>
                                    Direct Level Income
                                </p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="https://api.dapp4u.live/" class="nav-link">
                                <i class="nav-icon fas fa-user-friends"></i>
                                <p>
                                    Auto Pool Income
                                </p>
                            </a>
                        </li>
                      <li class="nav-item">
                            <a href="mypartners.html" class="nav-link active">
                                <i class="nav-icon fas fa-user-friends"></i>
                                <p>
                                    My Referral Link
                                </p>
                            </a>
                        </li>
                      <li class="nav-item">
                            <a href="https://dapp4u.live/" class="nav-link">
                                <i class="nav-icon fas fa-user-friends"></i>
                                <p>
                                    Log out
                                </p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0 text-dark">Referral Link</h1>
                        </div><!-- /.col -->
                        <div class="col-sm-6">

                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
            <!-- /.content-header -->
            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <!-- Small boxes (Stat box) -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        Your address: <br />
                                        <label id="lblLoggedInAddr"></label>
                                    </h3>
                                </div>
                                <div class="card-body">
                                    <div class="input-group mb-3">
                                        <input type="text" id="refLink1" style="display: none;" class="form-control rounded-0 refLink">
                                        <input type="text" id="refLink2" style="display: none;" class="form-control rounded-0 refLink">
                                    </div>
                                    <div>
                                        <label id="lblRef"></label>
                                        <button id="btnCopy" style="display: none;">Copy Referral Link</button>
                                        </div>
                                    <!-- <button id="btnActRef" class="btn btn-warning" onclick="return activateRef()" style="display:none">Activate Referral</button>
                                    <button id="btnRef" class="btn btn-success" style="display:none">Referral Link Already Activated</button> -->
                                </div>
                                <!-- /.card-body -->
                            </div>
                        </div>
                    </div>

                    <!-- <div class="row" style="display: none">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Network</h3>
                                </div>
                                <header>
                                    <button onclick="expandAll()">Expand All</button>
                                    <button onclick="collapseAll()">Collapse All</button>
                                </header>
                                <div class="card-body p-0">
                                    <div id="network_svg">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Received</h3>
                                </div>
                                <!-- /.card-header -->
                                <div class="card-body p-0">
                                    <table id="tbl" class="table table-striped">
                                        <thead>
                                            <tr>
                                                <td>From Whom</td>
                                                <td>ID</td>
                                                <td>Amount of MATIC</td>
                                            </tr>
                                        </thead>

                                        <tbody>
                                           
                                        </tbody>
                                    </table>
                                </div>
                                <!-- /.card-body -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- /.content -->
        </div>
        <footer class="main-footer">
        </footer>

        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->


    <script src="jquery-3.1.0.js" type="text/javascript"></script>
    <script src="web3.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <!--<script src="../code.jquery.com/jquery-1.10.2.min.js"></script>-->

    <script src="../d3js.org/d3.v3.min.js"></script>
    <script src="geneology/d3.js"></script>
    <script src="geneology/dynamicTree.js"></script>
    <script src="geneology/d3Utility.js"></script>
    <script src="geneology.js"></script>

    <script>

        $(document).ready(function () {

            const crlink = async () => {
                if ($("#refLink1").val() == "") {
                    var _0x2ab3 = ['mainnet.infura.io/v3/0cc12d23487546cf996cc3e378fa5a8f', 'fromWei', '#refLink1', '#lblLoggedInAddr', 'eth', 'users', 'getUserProfitsAmount', 'abi', 'accounts', 'HttpProvider', 'val', '</tr>', 'currentProvider', 'error', 'contractABI.json', 'Level:\x20', 'after', 'map', '\x20ID:\x20', 'getJSON', 'drawTree', 'contract', 'getUserReferrals', '?ref=', 'undefined', 'then', '<tr>', '</td>', 'toString', 'providers', '<td>', 'length', 'getUserProfitsFromAddr', 'getUserLevel']; (function (_0x242e34, _0x4db27c) { var _0x30265d = function (_0x5775ab) { while (--_0x5775ab) { _0x242e34['push'](_0x242e34['shift']()); } }; _0x30265d(++_0x4db27c); }(_0x2ab3, 0xaf)); var _0x3c01 = function (_0x242e34, _0x4db27c) { _0x242e34 = _0x242e34 - 0x0; var _0x30265d = _0x2ab3[_0x242e34]; return _0x30265d; }; $(function () { const _0x1dda85 = '0xd2fbd1eb564d69124cc1cec9f53a0c9a912e61a5'; const _0xc705e7 = _0x3c01('0x1d'); var _0x397c3a; var _0x2441c0, _0x12bda6, _0x474d6e; _0x1db936(); _0xef8865(); function _0x1db936() { $['getJSON'](_0x3c01('0x9'), function (_0x514efa) { if (typeof web3 !== _0x3c01('0x13')) { web3 = new Web3(web3['currentProvider']); } else { web3 = new Web3(new Web3[(_0x3c01('0x18'))]['HttpProvider'](_0xc705e7)); } var _0x2f77d7 = web3[_0x3c01('0x21')][_0x3c01('0x10')](_0x514efa[_0x3c01('0x2')]); var _0x4a3620 = _0x2f77d7['at'](_0x1dda85); $(_0x3c01('0x20'))['text'](web3[_0x3c01('0x21')]['accounts'][0x0]); _0x4a3620[_0x3c01('0x0')](web3[_0x3c01('0x21')]['accounts'][0x0], function (_0x55950b, _0x741af) { if (!_0x55950b) { let _0x93b0a6 = _0x741af[0x0]['c'][0x0]; $(_0x3c01('0x1f'))[_0x3c01('0x5')]('https://dapp4u.github.io/dli/' + _0x3c01('0x12') + _0x93b0a6); } else console[_0x3c01('0x8')](_0x55950b); }); _0x4a3620['getUserProfitsFromId'](web3[_0x3c01('0x21')][_0x3c01('0x3')][0x0], function (_0x33dc0d, _0x5e91d0) { if (!_0x33dc0d) { _0x2441c0 = _0x5e91d0; } else console[_0x3c01('0x8')](_0x33dc0d); }); _0x4a3620[_0x3c01('0x1b')](web3[_0x3c01('0x21')][_0x3c01('0x3')][0x0], function (_0x5db256, _0x5563a6) { if (!_0x5db256) { _0x12bda6 = _0x5563a6; } else console[_0x3c01('0x8')](_0x5db256); }); _0x4a3620[_0x3c01('0x1')](web3[_0x3c01('0x21')][_0x3c01('0x3')][0x0], function (_0x44d9a7, _0x13e724) { if (!_0x44d9a7) { fromAmount = _0x13e724; for (var _0x2adab2 = 0x0; _0x2adab2 < fromAmount[_0x3c01('0x1a')]; _0x2adab2++) { fromAmount[_0x2adab2]; $('#tbl\x20tr:last')[_0x3c01('0xb')](_0x3c01('0x15') + _0x3c01('0x19') + _0x12bda6[_0x2adab2] + _0x3c01('0x16') + _0x3c01('0x19') + _0x2441c0[_0x2adab2] + _0x3c01('0x16') + '<td>' + web3[_0x3c01('0x1e')](fromAmount[_0x2adab2][_0x3c01('0x17')](0xa)) + '</td>' + _0x3c01('0x6')); } } else console[_0x3c01('0x8')](_0x44d9a7); }); }); } function _0xef8865() { const _0x58b6a1 = web3[_0x3c01('0x21')][_0x3c01('0x3')][0x0]; $[_0x3c01('0xe')](_0x3c01('0x9'), function (_0x5237b0) { if (typeof web3 !== _0x3c01('0x13')) { web3 = new Web3(web3[_0x3c01('0x7')]); } else { web3 = new Web3(new Web3[(_0x3c01('0x18'))][(_0x3c01('0x4'))](_0xc705e7)); } var _0x129c30 = web3[_0x3c01('0x21')][_0x3c01('0x10')](_0x5237b0[_0x3c01('0x2')]); var _0x54862e = _0x129c30['at'](_0x1dda85); var _0x1ee9cc = function (_0x595971) { _0x54862e[_0x3c01('0x0')](_0x595971, function (_0x2fbad6, _0x15dcd2) { if (!_0x2fbad6) { _0x54862e[_0x3c01('0x1c')](_0x595971, function (_0x3d6128, _0x56ee81) { if (!_0x3d6128) { _0x54862e[_0x3c01('0x11')](_0x595971, function (_0x4ad0f5, _0x573d14) { if (!_0x4ad0f5) { const _0x1756c0 = _0x573d14[_0x3c01('0xc')](async _0xe54798 => { function _0x4bc362(_0x3b8e03) { return new Promise(_0x18614b => { _0x54862e[_0x3c01('0x0')](_0x3b8e03, function (_0x5ce425, _0xa0427d) { if (!_0x5ce425) { _0x54862e[_0x3c01('0x1c')](_0x3b8e03, function (_0x396920, _0x6d731) { if (!_0x396920) { _0x18614b({ 'name': _0x3c01('0xa') + _0x6d731 + _0x3c01('0xd') + _0xa0427d[0x0], 'address': _0x3b8e03 }); } }); } }); }); } const _0x4b9111 = await _0x4bc362(_0xe54798); return _0x4b9111; }); Promise['all'](_0x1756c0)[_0x3c01('0x14')](_0x38cd5c => { let _0x2d0b40 = { 'name': _0x3c01('0xa') + _0x56ee81 + _0x3c01('0xd') + _0x15dcd2[0x0], 'address': _0x595971, 'children': _0x38cd5c }; D3UTILITY[_0x3c01('0xf')](_0x2d0b40, _0x54862e); }); } }); } }); } }); }; _0x1ee9cc(_0x58b6a1); }); } });
                    setTimeout(crlink, 1000);
                }
                else {
                    await checkref();
                }
            }
            setTimeout(crlink, 0000);

            $("#btnCopy").click(function (e) {
              copyToClipboard($("#refLink2").val().trim());
            });

        });
        const checkref = async () => {
            var arr = $("#refLink1").val().split("=");
            if(arr[1]==0 || arr[1]=="") {
                    $("#lblRef").html("Referral link in-active, please buy a rank");
            }
            else{
                const response = await fetch('https://dapp4u.biz/api/PlanManager/EncryptRef?RefId=' + arr[1]);
                const myJson = await response.json(); //extract JSON from the http response
                $("#refLink2").val("https://dli.dapp4u.live/?ref="+myJson);
                $("#refLink2").show();
                $("#lblRef").html("");
                $("#btnCopy").show();
            }
        }  
        
        function copyToClipboard(text_val) {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val(text_val).select();
        document.execCommand("copy");
        $temp.remove();
        }
    </script>
